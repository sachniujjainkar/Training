<%= form_for (@order) do |form| %>
  <% if order.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(order.errors.count, "error") %> prohibited this order from being saved:</h2>
      <ul>
      <% order.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </tr>
  <% end %>
<%= javascript_include_tag 'orders' %>

<table class = "table" >

<tr>
  <td><%= form.label :Select_user %></td>
  <td><%= form.select :user_id, User.all.collect { |user| [user.first_name + " " + user.last_name, user.id]},{:prompt => true} , {id: 'order_user_id'} %>
  </td>
</tr>

<tr>
 <td><%= form.label :address_id %>
<td><%= form.select :address_id,  {:prompt => true}, { id: 'order_address_id'} %></td>
 </tr>
<td>
<tr>

  <%= form.fields_for(:addresses) do |address| %>
            <tr>
            <td><%= address.label :Address_body %></td>
            <td><%= address.text_field :address_body ,  id: 1%></td></tr>
            <tr><td><%= address.label :city %></td>
            <td><%= address.text_field :city  , id: 2 %></td></tr>
            <tr><td><%= address.label :state %></td>
            <td><%= address.text_field :state , id: 3%></td></tr>
            <tr><td><%= address.label :postal_code %></td>
            <td><%= address.text_field :postal_code ,  id: 4%> </td> </tr>
   <% end %>
   </td>
   </tr>

<tr>

    <td><font color="red">*</font><%= form.label :order_no %></td>
    <td><%= form.text_field :order_no, id: :order_order_no,:value => "Ord-#{Order.last.id + 1}" %></td>
  </tr>

  <tr>
    <td><font color="red"></font><%= form.label :is_express_delivery %></td>
    <td><%= form.check_box :is_express_delivery, id: :order_is_express_delivery %></td>
  </tr>

  <tr>
    <td><%= form.label :is_customer_pickup %></td>
    <td><%= form.check_box :is_customer_pickup_boolean, id: :order_is_customer_pickup_boolean %></td>
  </tr>

  <tr>
    <td><font color="red">*</font><%= form.label :delivery_date %></td>
    <td><%= form.date_select :delivery_date, id: :order_delivery_date %></td>
  </tr>

  <tr>
    <td><font color="red">*</font><%= form.label :order_currency %></td>
    <td><%= form.select :order_currency, ['euro','dinar', 'dollar','lev' , 'franc', 'pound' ,'krone']%></td>
  </tr>

  <tr>
    <td><%= form.label :order_value %></td>
    <td><%= form.text_field :order_value, id: :order_order_value ,value: 0 %></td>
  </tr>

  <tr>
    <td><font color="red">*</font><%= form.label :tracking_no %></td>
    <td><%= form.number_field :tracking_no, id: :order_tracking_no %></td>
  </tr>

  <tr>
    <td><%= form.label :special_instruction %></td>
    <td><%= form.text_area :special_instruction, id: :order_special_instruction %></td>
  </tr>
<tr>
    <td>
      <h3 align="center"><font color="red">*</font> Add Products</h3>
      </td>
  </tr>

      <tr>
        <td><label for="Add Products"> Search product by name</td>
        <td><%= link_to_add_fields "product", form , "line_items" %></td>
  </tr>
  <tr>
<td>
    <%= form.submit %></td>
  </tr>

</table>
<% end %>
